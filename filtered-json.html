<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <title>Document</title>

</head>

<body>
    <main>
        <input type="checkbox" name="price" value="decrescent">Order
        <input type="checkbox" name="name" value="Motos, Carros">Autos
        <input type="checkbox" name="name" value="Aluguel, Compra e Venda, Classificados e Diversos">Others
        <input type="checkbox" name="itemId" value="16">16
        <input type="checkbox" name="itemId" value="17">17
        <input type="checkbox" name="itemId" value="18">18
        <input type="checkbox" name="itemId" value="19">19
        <input type="checkbox" name="itemId" value="20">20
        <input type="checkbox" name="itemId" value="21">21
        <input type="checkbox" name="itemId" value="22">22
        <input type="checkbox" name="itemId" value="23">23
        <section>
            <div>
                Name:<span></span><br>
                Id: <span></span>
            </div>
            <div>
                Name:<span></span><br>
                Id: <span></span>
            </div>
        </section>
        <button>Click</button>
    </main>
</body>

</html>

<script>
    $('button').click(() => {
        var params = {};
        $('input[type=checkbox]:checked').each((index, input) => {
            if(!params[$(input).attr('name')]) {
                params[$(input).attr('name')] = $(input).val().split(', ')
            } else {
                params[$(input).attr('name')] = params[$(input).attr('name')].concat($(input).val().split(', '));
            }
        });
        reOrder(params);
    })


    var get_json = [{
        "itemId": 16,
        "name": "Compra e Venda"
    }, {
        "itemId": 17,
        "name": "Aluguel"
    }, {
        "itemId": 18,
        "name": "Motos"
    }, {
        "itemId": 19,
        "name": "Carros"
    }, {
        "itemId": 20,
        "name": "Classificados Diversos"
    }, {
        "itemId": 21,
        "name": "Oferta de Emprego"
    }];

    function reOrder(params) {

        const keys = Object.keys(params);
        var json_data = get_json;

        keys.forEach((key) => {
            if (key === 'price') {
                if (params.sort === 'crescent') {
                    json_data.sort((a, b) => {
                        return a.name > b.name ? 1 : a.name < b.name ? -1 : 0;
                    });
                } else {
                    json_data.sort((a, b) => {
                        return a.name < b.name ? 1 : a.name > b.name ? -1 : 0;
                    });
                }
            } else {
                json_data = json_data.filter((obj) => {
                    if (params[key].includes(obj[key].toString())) {
                        return obj;
                    }
                })
            }
        });

        console.log('data: ', json_data);
        let arr = [];
        json_data.forEach(obj => {
            arr.push((`<div> Name:<span>${obj.name}</span><br> Id: <span>${obj.itemId}</span> </div>`))
        })
        $('section').html(arr);
    }
</script>
